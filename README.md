
# Слежение за системой инфраструктурой
## Задача
В конце рабочего дня серверы, стенды и другие машины могут оказаться недоступны.Для корректной работы вышеупомянутых машин необходимо разработать утилиту, которая будет напоминать сотрудникам (в определенный момент врмени) освобождать ресурсы машин. Разработку будем вести на яп golang. 
___
### 26.6
Реализацию кастомного протокола убрал.Для будущих тестов поднял tcp эхо-сервер,а также клиентское приложение.Добавлен таймаут на чтение данных.
___
### 23.6
Необходимо добавить 3 тип проверки. Идея - отправлять такой же запрос, как в http, но по другому протоколу.
Пока удалось создать кастомный протокол через пакет с  метаданными.
___
### 22.6
Попытался провести рефакторинг, добавив config файл, как было задумано после ревью. Данные в файле хранятся в JSON, считываются в мапу, ключи которой id задач, значения - другие мапы , кли которой параметры задачи, значения - значения параметров. Желаемого результата рефакторинга не достиг, т.к. код замусорился привязкой к задаче каждого типа. Для оптимизации необходимо вынести функцию проверки на более верхний уровень. Также , результаты првоерок необходимо вынести в отдельную структуру.
___
### 21.06
После ревью с руководителем  было принято решение немного поменять подход

Имеется входной конфигурационный файл в формате JSON, в котором перечислены сервера, а также параметры для доступа к ним.Будем считывать данные с файла в мапу интерефейсов,где ключ - это id задачи, а значение - параметры задачи; затем проходимся по каждому занчению мапы, извлекая параметры и отправляя их в функции проверки.Результаты проверок будем хранить в памяти , указывая id задачи, результат проверки, дату начала проверки, дату конца проверки,а также комментарии(при необходимости).

Также необходимо изменить концепцию запроса проверок в боте
Были недочеты во внутренних функциях, решил сначала реализовать загрузку данных с конфиг файла(пока функционал рабоатет), затем менять внутреннюю часть.
___
### 20.06
Реализован примитивный бот в тг, есть 2 кнопки, по которым можно запросить проверки машин. Функция будильника выводит сообщение в заданное время, при этом , и до звонка будильника, и после, есть возможность запрашивать проверки.
___
### 19.06
Поднял 2 сервера на локалхосте для тестирвоания функций првоерки(хост: 127.0.0.1, порты : 3333 и 4444), добавил внутреннюю функцию для обновления времени будильника.
В файле dop_func.go реализовано функции, использующиеся в основном main.go файле.
___
Реализован интерфейс checker, объединяющий методы check для 2 классов: http_prov и tcp_prov. Данные методы осуществляют проверку:
___
### http_prov
Посылает запрос на сервер , дожидается ответа.Возварщает значение true и выводит соответствующее сообщение в консоль, если функция хэндлер смогла обрабоать запрос и вернуть необходимый StatusCode.Иначе, значание false и соответствующее сообщение в консоль
### tcp_prov
Возварщает значение true и выводит соответствующее сообщение в консоль, если смог обнаружить работающий сервер на заданном порте и хосте. Иначе, значание false и соответствующее сообщение в консоль
___
Также в файле dop_func.go реализована функция-будильник Run()
### Run
Данная функция имеет константное значение времени ( 17:45:00) - время запуска основной утилиты.В заданный момент, срабатывает сигнал, после которого начинают работать методы проверки.
___
